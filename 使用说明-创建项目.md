# 📦 创建Google Cloud项目功能使用说明

## ✨ 功能概述

通过GUI一键自动创建Google Cloud项目，自动获取Cookie、验证项目ID、调用API创建，并保存项目信息。

## 🚀 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

新增依赖：`requests` - 用于API调用

### 2. 启动系统

**方式一：使用启动脚本**
```bash
start.bat
选择 [3] 安装Python依赖
选择 [1] 启动WebSocket服务器  
选择 [2] 启动GUI控制界面
```

**方式二：手动启动**
```bash
# 终端1: 启动服务器
python server.py

# 终端2: 启动GUI
python gui.py
```

### 3. 安装/刷新浏览器插件

由于添加了新功能，需要重新加载插件：

1. 打开 `chrome://extensions/`
2. 找到"浏览器远程控制"插件
3. 点击 **🔄 重新加载** 按钮
4. 确认插件显示 🟢 已连接

### 4. 准备工作

在使用前，请确保：

✅ **已登录Google账号**  
在浏览器中访问并登录 https://accounts.google.com/

✅ **已访问Google Cloud Console**  
访问 https://console.cloud.google.com/  
（这会生成必需的Cookie）

✅ **浏览器插件已连接**  
GUI界面显示：🟢 浏览器: 已连接

## 📋 使用步骤

### 创建项目

1. 在GUI界面中，找到 **🤖 自动化任务** 区域

2. 点击 **📁 创建项目** 按钮

3. 系统会自动执行：
   ```
   ✅ 步骤1: 获取浏览器Cookie
   ✅ 步骤2: 生成项目名称
   ✅ 步骤3: 调用API创建项目（项目ID由Google生成）
   ✅ 步骤4: 获取项目编号
   ✅ 步骤5: 保存到projects.txt
   ```

4. 创建成功后会弹窗显示：
   - 项目ID
   - 项目编号
   - 保存位置

### 查看创建的项目

**方式一：查看文件**
```
打开项目根目录下的 projects.txt
格式: project-id(project-number)
```

**方式二：访问Console**
```
https://console.cloud.google.com/
在项目选择器中查看新创建的项目
```

## 🎯 功能特点

### 1. 完全自动化
- ✅ 自动获取Cookie（无需手动复制）
- ✅ 自动生成项目名称
- ✅ **项目ID由Google自动分配**（确保唯一性）
- ✅ 自动获取项目编号（完整信息）

### 2. 智能重试
- Cookie验证失败时提供明确提示
- 网络超时自动处理
- 项目编号查询失败时自动重试

### 3. 详细日志
- 每步操作都有日志输出
- 成功/失败状态清晰显示
- 错误信息详细易懂

### 4. 数据持久化
- 自动保存到 `projects.txt`
- 格式规范，易于解析
- 支持查看历史记录

## 📊 项目ID规则

### Google自动分配规则
```
格式: 由Google Cloud自动生成
示例: macro-world-123456

说明:
- Google自动生成唯一ID
- 确保全局唯一性
- 符合Google Cloud命名规范
- 无需担心ID冲突
```

### 项目编号
```
格式: 12位数字
示例: 732051138771

说明:
- Google自动分配的唯一编号
- 用于某些API调用
- 创建后自动获取
```

## ⚠️ 常见问题

### Q1: 显示"Cookie获取失败"
**原因：**
- 浏览器插件未连接
- 未登录Google账号
- 未访问Google Cloud Console

**解决：**
1. 确认插件状态为 🟢 已连接
2. 访问 https://console.cloud.google.com/
3. 确保已登录Google账号

### Q2: 显示"缺少关键Cookie: SAPISID"
**原因：**
- Cookie不完整
- 未正确登录

**解决：**
1. 退出Google账号重新登录
2. 清除浏览器Cookie后重新登录
3. 确保访问了 https://console.cloud.google.com/

### Q3: "项目创建API调用成功"但无项目编号
**原因：**
- 项目正在后台创建中
- 需要等待1-5分钟

**解决：**
- 文件中会标记为"待查询"
- 稍后访问Console查看
- 编号会自动分配

### Q4: API返回错误403或401
**原因：**
- Cookie已过期
- 认证失败

**解决：**
1. 重新登录Google账号
2. 重新获取Cookie
3. 重试创建项目

## 🔧 技术架构

```
┌────────────┐
│    GUI     │ 用户点击"创建项目"
└─────┬──────┘
      │
      ↓
┌────────────┐
│  project_  │ 调用API创建项目
│   api.py   │
└─────┬──────┘
      │
      ↓
┌────────────┐
│  WebSocket │ 转发getCookies命令
│   Server   │
└─────┬──────┘
      │
      ↓
┌────────────┐
│  浏览器    │ 获取所有Google Cookie
│   插件     │
└────────────┘
```

## 📝 文件说明

```
goole/
├── project_api.py        # API封装（新增）
├── projects.txt          # 项目列表（新增）
├── gui.py                # GUI界面（已更新）
├── server.py             # WebSocket服务器
├── browser-extension/    # 浏览器插件（已更新）
│   ├── background.js     # 新增getCookies命令
│   └── manifest.json     # 新增cookies权限
└── requirements.txt      # 依赖列表（已更新）
```

## 🎓 进阶使用

### 批量创建项目

可以多次点击"创建项目"按钮，每次创建一个新项目。

**注意：**
- 每次创建间隔建议 5-10 秒
- 避免触发Google的频率限制
- 注意账号配额限制

### 查看项目列表

```python
# 读取projects.txt
with open('projects.txt', 'r', encoding='utf-8') as f:
    projects = f.readlines()
    
for project in projects:
    if project.strip() and not project.startswith('#'):
        print(project.strip())
```

### 使用项目信息

创建的项目可用于：
- 启用Google Cloud API
- 创建OAuth凭据
- 创建API密钥
- 管理资源

## 💡 提示

1. **Cookie安全**
   - Cookie仅在内存中临时存储
   - 不会保存到硬盘
   - 关闭程序后自动清除

2. **项目配额**
   - 免费账号有项目数量限制
   - 建议不要频繁创建
   - 定期清理不用的项目

3. **最佳实践**
   - 创建前确认浏览器已登录
   - 观察日志了解执行进度
   - 保存好projects.txt文件

## 📞 获取帮助

如遇到问题：
1. 查看GUI右侧日志面板
2. 检查浏览器插件控制台
3. 查看服务器窗口输出
4. 参考本文档常见问题

---

**祝使用愉快！** 🎉

